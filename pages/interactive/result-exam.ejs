<!DOCTYPE html>
<html lang="en" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta author="Leiva Martin">
    <title>Exam Results</title>
    <link rel="icon" type="segador.png" href="/img/tractores.png">
    <link rel="stylesheet" href="/css/exams.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Agbalumo&family=Oswald:wght@200..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/font/iconos.css">
</head>
<body>
    <header class="cabecera">
        <div class="logo-container">
            <a href="/dashboard">
                <img id="logo" src="/img/logo.png" alt="logo">
            </a>
            <img id="nombre_pagina" src="/img/nombre_pagina.png" alt="Nombre Página">
        </div>
        <div class="user-menu">
            <% if (user.profilePicture) { %>
                <img src="<%= user.profilePicture %>" alt="Profile Pic" class="profile-pic-avatar">
            <% } else { %>
                <img id="user-avatar" src="/img/pngwing.png" alt="Profile Pic">
            <% } %>
            <div class="dropdown-content">
                <p class="userName"><%= user.username %></p>
                <p class="userRole"><%= user.role %></p>
                <a href="/users/profile">Profile</a>
                <% if (user.role === 'student') { %>
                    <a href="/users/grades">Grades</a>
                <% } %>
                <% if (user.role === 'teacher') { %>
                    <a href="/question-bank">Create Exam</a>
                    <a href="/users/userList">Registration List</a>
                    <a href="/users/teacher-grades">Grades</a>
                <% } %>
                <a href="/api/auth/logout">Log Out</a>
            </div>
        </div>
    </header>
    <nav id='menu'>
        <input type='checkbox' id='responsive-menu'><label></label>
        <ul>
            <li><a href='/classes/first'>1st YEAR</a></li>
            <li><a href='/classes/second'>2nd YEAR</a></li>
            <li><a href='/classes/third'>3rd YEAR</a></li>
            <li><a href='/classes/fourth'>4th YEAR</a></li>
            <li><a href='/classes/fifth'>5th YEAR</a></li>
            <li><a href='/classes/sixth'>6th YEAR</a></li>
            <li><a href='/select-exam'>Interactive Tests</a></li>
        </ul>
    </nav>
    <main class="exam-results">
        <section class="tabla-resultados">
            <h1>Exam Results</h1>

            <table>
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Course</th>
                        <th>Unit</th>
                        <th>Attempts</th>
                        <th>Highest Grade</th>
                        <th>Last Grade</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><%= user.username %></td>
                        <td><%= course %></td>
                        <td><%= unit %></td>
                        <td><%= attempts %></td>
                        <td><%= highestGrade %></td>
                        <td><%= lastGrade %></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="retroalimentacion">
            <h2>Feedback on Your Answers</h2>
                <% questions.forEach((question, index) => { %>
                    <div class="feedback">
                        <p><strong>Question <%= index + 1 %>:</strong> <%= question.question %></p>
                        <p><strong>Your Answer:</strong> <%= question.userAnswer %></p>
                        <p><strong>Correct Answer:</strong> <%= question.correctAnswer %></p>

                        <% if (question.isCorrect) { %>
                            <p class="correcto">You answered correctly! ✅</p>
                        <% } else { %>
                            <p class="incorrecto">Your answer was incorrect. ❌</p>
                        <% } %>

                        <p><strong>Feedback:</strong> <%= question.feedback %></p>
                    </div>
                <% }) %>
                <button type="button" onclick="window.location.href='/select-exam'">Finish Revision</button>
        </section>
    </main>

    <footer>
        <p>Copyright © 2024 - Leiva Martín R.</p>
        <p><span class="icon-envelope"></span>englishcultivatehub@gmail.com &emsp;|| &emsp;<span class="icon-whatsapp"></span>(3482)-666150</p> 
        <div class="redes">
            <img class="logo-escuela" src="/img/logo_escuela.jpeg" alt="logo_escuela">
            <img class="escuela" src="/img/agrotecnica.jpg" alt="Escuela">
            <div class="iconos">
                <a href="https://www.facebook.com/groups/174789172685781" target="_blank" class="icon-facebook2"></a>
                <a href="https://www.instagram.com/agro487cas/?hl=es-la" target="_blank" class="icon-instagram"></a>
            </div>
        </div>
    </footer>
</body>
</html>
